(()=>{"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function t(t){for(var o=1;o<arguments.length;o++){var p=null!=arguments[o]?arguments[o]:{};o%2?e(Object(p),!0).forEach((function(e){r(t,e,p[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(p)):e(Object(p)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(p,e))}))}return t}function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=wp.data,p=o.registerStore,n=(o.withSelect,o.withDispatch,o.dispatch,wp.i18n.__),a={title:n("Select Properties","spacento"),wait:n("Please Wait...","spacento"),error:n("Something went wrong...","spacento")},s={spacentoClasses:{outerContainer:"spacento-hide-overlay"},spacentoAttributes:{propertyType:"all",propertyLocation:"all",property:"all"},propertyTypeOptions:spacentoBlockVariables.properties.types,propertyLocationOptions:spacentoBlockVariables.properties.locations,spacentoOverlayText:a.wait,propertyOptions:spacentoBlockVariables.properties.propertiesids,propertyLayout:{}};function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}p("spacento/properties",{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,o=arguments.length>1?arguments[1]:void 0;switch(o.type){case"SET_CLASS":return t(t({},e),{},{spacentoClasses:t(t({},e.spacentoClasses),{},r({},o.spacentoElement,o.spacentoClass))});case"SET_TYPE_OPTIONS":return t(t({},e),{},{propertyTypeOptions:o.propertyTypeOptions});case"SET_LOCATION_OPTIONS":return t(t({},e),{},{propertyLocationOptions:o.propertyLocationOptions});case"SET_OVERLAY_TEXT":return t(t({},e),{},{spacentoOverlayText:o.overlayText});case"SET_ATTRIBUTE":return t(t({},e),{},{spacentoAttributes:t(t({},e.spacentoAttributes),{},r({},o.attribute,o.value))});case"SET_PROPERTY_OPTIONS":return t(t({},e),{},{propertyOptions:o.propertyOptions});case"SET_PROPERTY_LAYOUT":case"UPDATE_PROPERTY_LAYOUT":return t(t({},e),{},{propertyLayout:o.value})}return e},actions:{setClass:function(e,t){return{type:"SET_CLASS",spacentoElement:e,spacentoClass:t}},setTypeOptions:function(e){return{type:"SET_TYPE_OPTIONS",propertyTypeOptions:e}},setLocationOptions:function(e){return{type:"SET_LOCATION_OPTIONS",propertyLocationOptions:e}},setPropertyOptions:function(e){return{type:"SET_PROPERTY_OPTIONS",propertyOptions:e}},setOverlayText:function(e){return{type:"SET_OVERLAY_TEXT",overlayText:e}},setSpacentoAttributes:function(e,t){return{type:"SET_ATTRIBUTE",attribute:e,value:t}},setPropertyLayout:function(e){return{type:"SET_PROPERTY_LAYOUT",value:e}},updatePropertyLayout:function(e){return{type:"UPDATE_PROPERTY_LAYOUT",value:e}}},selectors:{getClass:function(e,t){var r=e.spacentoClasses;return e.propertyType,r[t]},getPropertyTypeOptions:function(e){return e.propertyTypeOptions},getPropertyLocationOptions:function(e){return e.propertyLocationOptions},getPropertyOptions:function(e){return e.propertyOptions},getOverlayText:function(e){return e.spacentoOverlayText},getSpacentoAttributes:function(e,t){return e.spacentoAttributes[t]},getPropertyLayout:function(e){return e.propertyLayout}},controls:{},resolvers:{}});var l=wp.compose,y=l.useInstanceId,u=(l.withState,lodash.isEmpty),O=wp.components,b=(O.BaseControl,O.SelectControl),T=wp.i18n.__,f={title:T("Select Properties","spacento"),wait:T("Please Wait...","spacento"),error:T("Something went wrong...","spacento")},g=wp.data,P=(g.registerStore,g.withSelect),d=(g.withDispatch,g.dispatch),S=P((function(e){var t=e("spacento/properties"),r=t.getClass,o=t.getOverlayText;return{spacentoClassName:r("outerContainer"),spacentoOverlayText:o()}}))((function(e){e.help,e.label,e.multiple,e.onChange;var t=e.options,r=void 0===t?[]:t,o=e.spacentoClassName,p=e.spacentoOverlayText,n=e.children,a=y(S),s=("inspector-select-control-".concat(a),"spacento-inspector-container ".concat(o));return!u(r)&&React.createElement("div",{id:o,className:s},React.createElement("h3",null,f.title),n,React.createElement("div",{className:"spacento-inspector-container-overlay"},React.createElement("p",null,React.createElement("span",null)),React.createElement("p",null,p)))})),m=P((function(e,t){return"propertyLocation"==t.type?{options:(0,e("spacento/properties").getPropertyLocationOptions)(),value:e("spacento/properties").getSpacentoAttributes("propertyLocation")}:"propertyType"==t.type?{options:(0,e("spacento/properties").getPropertyTypeOptions)(),value:e("spacento/properties").getSpacentoAttributes("propertyType")}:"property"==t.type?{options:(0,e("spacento/properties").getPropertyOptions)(),value:e("spacento/properties").getSpacentoAttributes("property")}:void 0}))((function(e){return React.createElement(b,{label:e.label,value:e.value,options:e.options,onChange:e.onChangeTest})})),v=P((function(e,t){return{spacentoClassObject:(0,e("spacento/properties").getPropertyLayout)()}}))((function(e){return React.createElement("div",{className:e.className},React.createElement("h4",null,e.spacentoTitle),Object.keys(e.options).map((function(t,r){return React.createElement("p",{className:e.spacentoClassObject[t]},React.createElement("img",{src:e.options[t].image,onClick:function(){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e.spacentosource);r[t]="spacento-layout-option-selected",d("spacento/properties").updatePropertyLayout(r),e.spacentoCallback(t)}}),React.createElement("span",null,e.options[t].name))})))}));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=wp.apiFetch,L=wp.i18n.__,A=wp.blocks,j=A.registerBlockType,R=(A.query,wp.blockEditor),_=(R.RichText,R.InspectorControls),k=wp.components,B=(k.CheckboxControl,k.RadioControl,k.TextControl,k.ToggleControl,k.SelectControl,wp.serverSideRender),x=wp.components.PanelBody,D=wp.compose,N=(D.useInstanceId,D.withState,wp.element.Component,lodash.isEmpty,wp.components.BaseControl,{title:L("Select Properties","spacento"),wait:L("Please Wait...","spacento"),error:L("Something went wrong...","spacento")}),V=wp.data,I=(V.registerStore,V.withSelect,V.withDispatch,V.dispatch),Y=V.select,U=lodash.isObject,W=wp.element,F=W.createElement,X=(W.useState,wp.primitives.SVG),q=F("circle",{cx:10,cy:10,r:10,fill:"red",stroke:"blue",strokeWidth:"10"});F(X,{width:20,height:20,viewBox:"0 0 20 20"},q),console.log(spacentoBlockVariables.pluginUrl);var G={layoutOne:{image:spacentoBlockVariables.pluginUrl+"/admin/images/layout-one.jpg",name:L("Layout One","spacento")},layoutTwo:{image:spacentoBlockVariables.pluginUrl+"/admin/images/layout-two.jpg",name:L("Layout Two","spacento")}},z={};Object.keys(G).forEach((function(e,t){z[e]="spacento-layout-option"}));var H=w({},z);I("spacento/properties").setPropertyLayout(z),j("spacento/properties",{title:L("Spacento properties","spacento"),icon:"building",category:"spacento",keywords:[L("real estate","spacento"),L("property","spacento"),L("properties","spacento")],supports:{customClassName:!0},attributes:{propertyType:{type:"string",default:"all"},propertyLocation:{type:"string",default:"all"},property:{type:"string",default:"all"},layout:{type:"string",default:"layoutOne"}},example:{},edit:function(e){var t=e.attributes,r=e.setAttributes,o=e.isSelected,p=t.propertyType,n=t.propertyLocation,a=t.property,s=t.layout;if(Y("spacento/properties").getAttributes,o){I("spacento/properties").setClass("outerContainer","spacento-hide-overlay"),I("spacento/properties").setSpacentoAttributes("propertyType",p),I("spacento/properties").setSpacentoAttributes("propertyLocation",n),I("spacento/properties").setSpacentoAttributes("property",a);var c=w({},H);c[s]="spacento-layout-option-selected",I("spacento/properties").updatePropertyLayout(c)}var i=""!=p?p:"all",l=""!=n?n:"all",y=""!=a?a:"all",u=""!=s?s:"layoutOne";function O(){var e=Y("spacento/properties").getSpacentoAttributes("propertyLocation"),t=Y("spacento/properties").getSpacentoAttributes("propertyType");"all"==e&&"all"==t?(I("spacento/properties").setPropertyOptions(spacentoBlockVariables.properties.propertiesids),I("spacento/properties").setSpacentoAttributes("property","all")):C({url:"".concat(spacentoBlockVariables.api.getPropertyIds),method:"POST",data:{type:t,location:e}}).then((function(e){U(e)&&e.hasOwnProperty("data")&&e.data.hasOwnProperty("payload")?I("spacento/properties").setPropertyOptions(e.data.payload):I("spacento/properties").setPropertyOptions(spacentoBlockVariables.properties.propertiesids),I("spacento/properties").setSpacentoAttributes("property","all")}))}function b(e){I("spacento/properties").setClass("outerContainer","test123");var t=Y("spacento/properties").getSpacentoAttributes("propertyLocation");"all"==e?(r({propertyType:e}),i=e,I("spacento/properties").setLocationOptions(spacentoBlockVariables.properties.locations),I("spacento/properties").setSpacentoAttributes("propertyType",e),I("spacento/properties").setSpacentoAttributes("propertyLocation",t),O(),I("spacento/properties").setClass("outerContainer","spacento-hide-overlay")):C({url:"".concat(spacentoBlockVariables.api.getPropertyLocationOptions,"/").concat(e)}).then((function(o){if(U(o)&&o.hasOwnProperty("data")&&o.data.hasOwnProperty("payload")){r({propertyType:e}),i=e,I("spacento/properties").setSpacentoAttributes("propertyType",e),I("spacento/properties").setLocationOptions(o.data.payload);var p=!1;o.data.payload.forEach((function(e){t==e.value&&(p=!0)})),p?I("spacento/properties").setSpacentoAttributes("propertyLocation",t):(I("spacento/properties").setSpacentoAttributes("propertyLocation","all"),r({propertyLocation:"all"})),O(),I("spacento/properties").setClass("outerContainer","spacento-hide-overlay")}else I("spacento/properties").setOverlayText(N.error)}))}return React.createElement(React.Fragment,null,React.createElement(_,null,React.createElement(x,null,React.createElement(S,{label:L("Select Properties","spacento"),value:p,options:spacentoBlockVariables.properties.types,onChange:b},React.createElement(m,{label:L("Property Type :","spacento"),type:"propertyType",onChangeTest:b}),React.createElement(m,{label:L("Property Location :","spacento"),type:"propertyLocation",onChangeTest:function(e){I("spacento/properties").setClass("outerContainer","test123");var t=Y("spacento/properties").getSpacentoAttributes("propertyType");"all"==e?(r({propertyLocation:e}),l=e,I("spacento/properties").setTypeOptions(spacentoBlockVariables.properties.types),I("spacento/properties").setSpacentoAttributes("propertyLocation",e),I("spacento/properties").setSpacentoAttributes("propertyType",t),O(),I("spacento/properties").setClass("outerContainer","spacento-hide-overlay")):C({url:"".concat(spacentoBlockVariables.api.getPropertyTypeOptions,"/").concat(e)}).then((function(o){if(U(o)&&o.hasOwnProperty("data")&&o.data.hasOwnProperty("payload")){r({propertyLocation:e}),l=e,I("spacento/properties").setSpacentoAttributes("propertyLocation",e),I("spacento/properties").setTypeOptions(o.data.payload);var p=!1;o.data.payload.forEach((function(e){t==e.value&&(p=!0)})),p?I("spacento/properties").setSpacentoAttributes("propertyType",t):(I("spacento/properties").setSpacentoAttributes("propertyType","all"),r({propertyType:"all"})),O(),I("spacento/properties").setClass("outerContainer","spacento-hide-overlay")}else I("spacento/properties").setOverlayText(N.error)}))}}),React.createElement(m,{label:L("Property :","spacento"),type:"property",onChangeTest:function(e){I("spacento/properties").setSpacentoAttributes("property",a),y=e,r({property:e})}}),React.createElement(v,{className:"spacento-layout-container",options:G,spacentosource:H,spacentoCallback:function(e){u=e,r({layout:e})},spacentoTitle:L("Layout Type :","spacento")})))),React.createElement(B,{block:"spacento/properties",attributes:{propertyType:i,propertyLocation:l,property:y,layout:u}}))},save:function(e){return e.attributes,null}})})();